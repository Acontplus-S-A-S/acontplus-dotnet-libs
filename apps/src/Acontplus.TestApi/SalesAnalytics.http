### Sales Analytics API - Acontplus.Analytics Demo
### Demonstrates clean architecture with Analytics package

@baseUrl = https://localhost:7042
@language = en

### ========================================
### 1. Dashboard Statistics
### Returns comprehensive sales KPIs
### ========================================

### Get Dashboard (Last 30 Days, English)
GET {{baseUrl}}/api/analytics/sales/dashboard?language=en
Accept: application/json

### Get Dashboard (Custom Date Range, Spanish)
GET {{baseUrl}}/api/analytics/sales/dashboard
    ?startDate=2025-01-01
    &endDate=2025-12-31
    &language=es
Accept: application/json

### Get Dashboard (Last 7 Days)
GET {{baseUrl}}/api/analytics/sales/dashboard
    ?startDate={{$datetime iso8601 -7 d}}
    &endDate={{$datetime iso8601}}
    &language={{language}}
Accept: application/json

### ========================================
### 2. Real-Time Statistics
### Returns current operational metrics
### ========================================

### Get Real-Time Stats (English)
GET {{baseUrl}}/api/analytics/sales/realtime?language=en
Accept: application/json

### Get Real-Time Stats (Spanish)
GET {{baseUrl}}/api/analytics/sales/realtime?language=es
Accept: application/json

### ========================================
### 3. Aggregated Statistics (Time-Series)
### Returns data grouped by time periods
### ========================================

### Get Daily Aggregates (Last 30 Days)
GET {{baseUrl}}/api/analytics/sales/aggregated
    ?startDate={{$datetime iso8601 -30 d}}
    &endDate={{$datetime iso8601}}
    &groupBy=day
    &language={{language}}
Accept: application/json

### Get Hourly Aggregates (Today)
GET {{baseUrl}}/api/analytics/sales/aggregated
    ?startDate={{$datetime iso8601}}
    &endDate={{$datetime iso8601}}
    &groupBy=hour
    &language={{language}}
Accept: application/json

### Get Weekly Aggregates (Last 3 Months)
GET {{baseUrl}}/api/analytics/sales/aggregated
    ?startDate={{$datetime iso8601 -90 d}}
    &endDate={{$datetime iso8601}}
    &groupBy=week
    &language={{language}}
Accept: application/json

### Get Monthly Aggregates (Last Year)
GET {{baseUrl}}/api/analytics/sales/aggregated
    ?startDate={{$datetime iso8601 -365 d}}
    &endDate={{$datetime iso8601}}
    &groupBy=month
    &language={{language}}
Accept: application/json

### ========================================
### 4. Trend Analysis
### Returns trend data with moving averages
### ========================================

### Get Revenue Trends (Last 90 Days)
GET {{baseUrl}}/api/analytics/sales/trends
    ?startDate={{$datetime iso8601 -90 d}}
    &endDate={{$datetime iso8601}}
    &metric=revenue
    &language={{language}}
Accept: application/json

### Get Order Count Trends
GET {{baseUrl}}/api/analytics/sales/trends
    ?startDate={{$datetime iso8601 -60 d}}
    &endDate={{$datetime iso8601}}
    &metric=orders
    &language={{language}}
Accept: application/json

### Get Customer Trends
GET {{baseUrl}}/api/analytics/sales/trends
    ?startDate={{$datetime iso8601 -60 d}}
    &endDate={{$datetime iso8601}}
    &metric=customers
    &language={{language}}
Accept: application/json

### Get Average Order Value Trends
GET {{baseUrl}}/api/analytics/sales/trends
    ?startDate={{$datetime iso8601 -60 d}}
    &endDate={{$datetime iso8601}}
    &metric=aov
    &language={{language}}
Accept: application/json

### ========================================
### Sample Response Structure
### ========================================

# Dashboard Response:
# {
#   "totalTransactions": 1543,
#   "completedTransactions": 1421,
#   "totalRevenue": 245678.90,
#   "netRevenue": 223456.78,
#   "growthRate": 12.5,
#   "averageOrderValue": 159.23,
#   "totalDiscounts": 22222.12,
#   "discountPercentage": 9.04,
#   "cancelledOrders": 122,
#   "cancellationRate": 7.91,
#   "cashSales": 98765.43,
#   "creditCardSales": 123456.78,
#   "transferSales": 23456.69,
#   "newCustomers": 234,
#   "returningCustomers": 543,
#   "customerRetentionRate": 69.86,
#   "labels": {
#     "TotalRevenue": "Total Revenue",
#     "NetRevenue": "Net Revenue",
#     "AverageOrderValue": "Average Order Value",
#     ...
#   }
# }

# Real-Time Response:
# {
#   "activeSales": 12,
#   "pendingPayments": 8,
#   "currentHourRevenue": 1234.56,
#   "currentDayRevenue": 23456.78,
#   "averageSaleTime": 15.3,
#   "salesPerHour": 45,
#   "peakHourRevenue": 3456.78,
#   "labels": { ... }
# }

# Aggregated Response:
# [
#   {
#     "period": "2025-12-01T00:00:00Z",
#     "value": 12345.67,
#     "minValue": 45.00,
#     "maxValue": 567.89,
#     "avgValue": 145.23,
#     "count": 85,
#     "percentile25": 89.50,
#     "percentile50": 145.23,
#     "percentile75": 234.56,
#     "labels": { ... }
#   }
# ]

# Trends Response:
# [
#   {
#     "date": "2025-12-01T00:00:00Z",
#     "value": 12345.67,
#     "movingAverage7": 11234.56,
#     "movingAverage30": 10987.65,
#     "samePeriodLastYear": 9876.54,
#     "trendDirection": "up",
#     "changePercent": 4.5,
#     "labels": { ... }
#   }
# ]
